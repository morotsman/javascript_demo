<!doctype html>


<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=1024" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <title>impress.js | presentation tool based on the power of CSS3 transforms and transitions in modern browsers | by Bartek Szopka @bartaz</title>

        <meta name="description" content="impress.js is a presentation tool based on the power of CSS3 transforms and transitions in modern browsers and inspired by the idea behind prezi.com." />
        <meta name="author" content="Bartek Szopka" />

        <link href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|PT+Sans:400,700,400italic,700italic|PT+Serif:400,700,400italic,700italic" rel="stylesheet" />


        <link href="css/impress-demo.css" rel="stylesheet" />

        <link rel="shortcut icon" href="favicon.png" />
        <link rel="apple-touch-icon" href="apple-touch-icon.png" />
    </head>


    <body class="impress-not-supported">


        <div class="fallback-message">
            <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
            <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
        </div>


        <div id="impress">


            <div id="animated_1" class="step slide" data-x="0" data-y="-1500">
                <canvas id="canvas1" width="800" height="600"></canvas>
            </div>

            <div id="animated_2" class="step slide" data-x="1000" data-y="-1500">
                <canvas id="canvas2" width="800" height="600"></canvas>
            </div>

            <div class="step slide" data-x="4000" data-y="-1500">
                <q>Some other stuff</q>
            </div>    




            <div id="overview" class="step" data-x="2000" data-y="-1500" data-scale="3">
            </div>

        </div>


        <script>
            if ("ontouchstart" in document.documentElement) {
                document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
            }
        </script>


        <script src="external/impress.js"></script>
        <script src="external/jquery.min.js"></script>
        <script type="text/javascript" src="stream.js"></script>
        <script type="text/javascript" src="list.js"></script>
        <script type="text/javascript" src="timer.js"></script>
        <script type="text/javascript" src="animator.js"></script>
        <script>impress().init();

            $(window).load(function() {

                var canvas1 = document.getElementById("canvas1");
                var ctx = canvas1.getContext("2d");

                var canvas2 = document.getElementById("canvas2");
                var ctx2 = canvas2.getContext("2d");



                var getActiveSlide = function() {
                    return $(".active")
                            .attr('id');
                };

                var positiveNumbers = new Stream().generate(1, function(seed) {
                    return seed + 1;
                });

                var primes = new Stream()
                        .generateFromStream(positiveNumbers.tail(), function(stream) {
                    return stream.tail().filter(function(x) {
                        return x % stream.head() !== 0;
                    });
                });

                var letters = ["D", "E", "M", "O", " ", "Z", "E", "I", "T"];
                var letterStream = new Stream()
                        .generate(0, function(seed) {
                    return seed + 1 === letters.length ? 0 : seed + 1;
                })
                        .map(function(i) {
                    return letters[i];
                });



                var randomStream = function(low, high) {
                    return new Stream().generate(0, function(seed) {
                        return Math.floor((Math.random() * high) + low);
                    });
                };

                var randomPositions =
                        randomStream(0, 700)
                        .zip(randomStream(30, 500))
                        .map(function(v) {
                    return {x: v.one, y: v.two};
                });

                var indexAndRandomPositions =
                        randomPositions
                        .tail()
                        .zip(positiveNumbers)
                        .map(function(v) {
                    return {index: v.two, x: v.one.x, y: v.one.y};
                });


                var primesWithPositionAndIndex =
                        indexAndRandomPositions
                        .zip(primes)
                        .map(function(v) {
                    return {index: v.one.index, word: v.two, x: v.one.x, y: v.one.y};
                });

                var words = ["Function", "Agile", "Scrum", "Scala", "Java", "JavaScript", "(a,b)=>a+b", "val x=Stream(1,2,3)", "map", "forEach", "foldLeft", "foldRight"];

                var randomWordStream =
                        randomStream(0, words.length)
                        .map(function(v) {
                    return words[v];
                });

                var wordsWithPositionAndIndex =
                        indexAndRandomPositions
                        .zip(randomWordStream)
                        .map(function(v) {
                    return {index: v.one.index, word: v.two, x: v.one.x, y: v.one.y};
                });

                var lettersWithPositionAndIndex =
                        indexAndRandomPositions
                        .zip(letterStream)
                        .map(function(v) {
                    return {index: v.one.index, word: v.two, x: v.one.x, y: v.one.y};
                });



                //timers.start();
                

                var animatorTemplate = new AnimatorTemplate({canvas: canvas1});

                var animator = primesWithPositionAndIndex.take(100).foldLeft(animatorTemplate, function(animator, v) {
                    return animator.animate(
                            function(animation) {
                                return animation
                                        .subject(v.word)
                                        .font("Arial")
                                        .position({x: v.x, y: v.y})
                                        .fade(v.index * 1, 5000, 0, 1)
                                        .scale(v.index * 1, 10000, 0, 100)
                                        .fade(v.index * 1 + 5000, 5000, 1, 0);
                            });
                }).loop().create();
                
                
                
                
                console.log(getActiveSlide());

                var slide = 1;
                document.getElementById("impress").addEventListener("impress:stepenter", function(event, more) {
                    ctx.clearRect(0, 0, canvas1.width, canvas1.height);
                    ctx2.clearRect(0, 0, canvas1.width, canvas1.height);
                    if (getActiveSlide() === "animated_1") {
                        animator.start();
                    } else {
                        animator.stop();
                    } 
                });

                document.getElementById("impress").addEventListener("impress:stepleave", function(event) {
                    ctx.clearRect(0, 0, canvas1.width, canvas1.height);
                    ctx2.clearRect(0, 0, canvas1.width, canvas1.height);
                });               

                //timers.add(f);
                
                /*
                var requestAnimationFrame = window.requestAnimationFram ||
                                            window.mozRequestAnimationFrame ||
                                            window.webkitRequestAnimationFrame ||
                                            window.msRequestAnimationFrame;

                var cancelAnimationFrame = window.cancelAnimationFram ||
                                            window.mozCancelAnimationFrame ||
                                            window.webkitCancelAnimationFrame ||
                                            window.msCancelAnimationFrame;
                
                var start = new Date().getTime();
                var id; 
                var test = function(now){
                   console.log(now-start);
                   id = requestAnimationFrame(test);
                   console.log(id);
                }; 
                requestAnimationFrame(test);
                
                cancelAnimationFrame(id);
*/

            });


            /*
             timers.add(function(){
     
     
             var now = new Date().getTime();  
             var timeFromStart = now-start;
     
             var fadeOut = function(v,duration){
             var durationInSec = duration/1000;
             var scale = ((timeFromStart-v.time)%(duration));
             var alpha = durationInSec-(scale/1000);
             ctx.font = 10*(duration/1000) + 10*(scale/1000) + "px Arial";
             ctx.fillStyle = "rgba(255, 0, 0, " + alpha/durationInSec + ")";
             ctx.fillText(v.word, v.x, v.y);                  
             };
     
             var fadeIn = function(v, duration){
             var alpha = ((timeFromStart-v.time)%(duration));
             ctx.font = 10*(alpha/1000) + "px Arial";
             ctx.fillStyle = "rgba(255, 0, 0, " + alpha/duration + ")";
             ctx.fillText(v.word, v.x, v.y);                  
             };          
     
             var timeFramedElementStream = function(stream, startTime, duration){//each element on stream is shown for duration
             return stream
             .takeWhile(function(v){
             return v.time < timeFromStart-startTime;
             })
             .filter(function(v){
             return v.time > timeFromStart - duration;
             });    
             };
     
             var timeLimitedStream = function(stream, duration){
             return stream.filter(function(v){
             return v.time < duration;
             }) 
             };
     
             if(slide===1){
     
             ctx.clearRect(0, 0, canvas1.width, canvas1.height);
             timeFramedElementStream(primesWithPositionAndTime, 0, 5000).forEach(function(v){fadeIn(v,5000);}); 
     
             timeFramedElementStream(primesWithPositionAndTime, 5000, 10000).forEach(function(v){fadeOut(v,5000);}); 
     
             if(timeFromStart > 60000*3){//loop every third minute
             start = new Date().getTime(); 
     
             }
     
             }
             if(slide===2){
             ctx2.clearRect(0, 0, canvas1.width, canvas1.height);
             timeLimitedStream(timeFramedElementStream(wordsWithPositionAndTime, 0, 5000), 20000)                  
             .forEach(function(v){
             var alpha = ((timeFromStart-v.time)%(5000));
             ctx2.font = 10*(alpha/1000) + "px Arial";
             ctx2.fillStyle = "rgba(255, 0, 0, " + alpha/5000 + ")";
             ctx2.fillText(v.word, v.x, v.y);                  
             });
     
     
             timeLimitedStream(timeFramedElementStream(lettersWithPositionAndTime,10000,15000),28000)              
             .forEach(function(v){
             var alpha = ((timeFromStart-v.time)%5000)/1000;
             ctx2.font = 40*alpha + "px Arial";
             ctx2.fillStyle = "rgba(0, 0, 0, " + alpha/20 + ")";
             ctx2.fillText(v.word, v.x, v.y);  
             });
     
     
             if(timeFromStart > 23000  && timeFromStart < 29000){
             var scale = ((timeFromStart-23000)%6000)/1000;
             ctx2.font = 15*scale + "px Arial";
             ctx2.fillStyle = "rgba(255, 0, 0, " + scale/5 + ")";
             ctx2.fillText("DEMO ZEIT", 100, 200);                
             }
     
             if(timeFromStart > 29000){
             var scale = 6;
             ctx2.font = 15*scale + "px Arial";
             ctx2.fillStyle = "rgba(255, 0, 0, " + scale/5 + ")";
             ctx2.fillText("DEMO ZEIT", 100, 200);          
             }
     
     
             if(timeFromStart > 25000  && timeFromStart < 29000){
             var scale = ((timeFromStart-26000)%5000)/1000;
             ctx2.font = 10*scale + "px Arial";
             ctx2.fillStyle = "rgba(255, 0, 0, " + scale/5 + ")";
             ctx2.fillText("MIT NIKLAS", 100, 300);                
             }           
             if(timeFromStart > 29000){
             var scale = 3;
             ctx2.font = 10*scale + "px Arial";
             ctx2.fillStyle = "rgba(255, 0, 0, " + scale/5 + ")";
             ctx2.fillText("MIT NIKLAS", 100, 300);          
             }  
     
             }
     
     
             });
             */


        </script>





    </body>
</html>


